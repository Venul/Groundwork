window.ru=window.ru||{},window.ru.mail=window.ru.mail||{},window.ru.mail.mpf=window.ru.mail.mpf||{},window.ru.mail.mpf.components=window.ru.mail.mpf.components||{},window.ru.mail.mpf.components.PushNotifications=function(t){function e(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.View=e.Model=e.version=void 0;var s=r(1),i=n(s),o=r(5),a=n(o),c="4.0.2";e.version=c,e.Model=i["default"],e.View=a["default"]},function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var s=r(2),i=r(3),o=r(4);e["default"]=function(t,e,r){if("undefined"==typeof e||null===e)throw new Error(o.ERRORS.CPF_NOT_FOUND.message);var a=e.Basic.getModel,c=function(t){var e=this,s=arguments.length<=1||void 0===arguments[1]?"log":arguments[1];return function(){for(var i=arguments.length,a=Array(i),c=0;i>c;c++)a[c]=arguments[c];if(r){var u;(u=console)[s].apply(u,[o.MODEL_NAME+"["+s+":"+t+"]"].concat(a))}e._trigger.apply(e,n([t].concat(a)))}},u=function(t,e){var r=c.bind(this),n=this.isEnabled(),s=this._opts.timeMarkDelta;!n&&e.isSubscribed?t.unsubscribe():n&&i.checkTimeMark(s).then(function(){r("ready")(e)})["catch"](r("error","warn"))},l=null;return a({_Events:["ready","change","error","subscribe","unsubscribe"],isEnabled:function(){return this._opts.isEnabled},_Init:function(){if(r&&console.log(o.MODEL_NAME+":init"),null===l){var t=c.bind(this);l=s.init(this._opts.pushOptions),l.on("change",t("change")),l.on("subscribe",t("subscribe")),l.on("unsubscribe",t("unsubscribe")),l.on("ready",u.bind(this)),l.on("error",t("error","error"))}},ready:function(){return l.ready()},toggle:function(){var t=this;return i.clearTimemark().then(function(t){return l.ready()}).then(function(t){return t.toggle()}).then(function(e){var r=e.getState();return r.isSubscribed?e:t.defer().then(function(t){return e})})},subscribe:function(){return i.clearTimemark().then(function(t){return l.ready()}).then(function(t){var e=t.getState();return e.isSubscribed?t:t.subscribe()})},unsubscribe:function(){return this.defer().then(function(t){return l.ready()}).then(function(t){var e=t.getState();return e.isSubscribed?t.unsubscribe():t})},clear:function(){return i.clearTimemark().then(function(t){return l.ready()})},defer:function(){var t=this._opts.timeMarkDelta,e=c.bind(this);return i.updateTimeMark(t)["catch"](e("error","warn"))}},o.MODEL_DEFAULTS_OPTS,null,o.MODEL_NAME)}(window,window.ru.mail.cpf,window.DEBUG),t.exports=e["default"]},function(t,e,r){!function(e,r){t.exports=r()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var s=r[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";var n=r(1);t.exports={init:n.init,version:"2.1.0"}},function(t,e,r){"use strict";function n(t){return new Promise(function(e,r){var n=t.allowedPlatforms.map(function(t){return t.toLowerCase()}),s=t.platform.PLATFORM.toLowerCase();d.isSupported()&&-1!==n.indexOf(s)?e():r(new h.PushNotificationsError(_.ERRORS.UNSUPPORTED))})}function s(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return new Promise(function(t,r){switch(b.permission){case"granted":t.apply(void 0,e);break;case"denied":r(new h.PushNotificationsError(_.ERRORS.PERMISSION_DENIED));break;case"default":t.apply(void 0,e);break;default:t.apply(void 0,e)}})}function i(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return new Promise(function(t,r){"granted"===b.permission?t.apply(void 0,e):b.requestPermission(function(n){"granted"===n?t.apply(void 0,e):r(new h.PushNotificationsError(_.ERRORS.PERMISSION_DENIED))})})}function o(t){return g.ready().then(g.removeSubscription).then(function(e){return t(-1,e)}).then(function(){w.dispatch({type:_.EVENTS.UNSUBSCRIBE}),E.emit(_.EVENTS.UNSUBSCRIBE)})["catch"](function(t){E.emit(_.EVENTS.ERROR,t)})}function a(t){return g.ready().then(i).then(g.getOrCreateSubscription).then(function(e){return t(0,e).then(function(t){return e})["catch"](function(t){E.emit(_.EVENTS.ERROR,t)})}).then(function(t){var e=p.getPayload(t.toJSON());w.dispatch({type:_.EVENTS.SUBSCRIBE,subscription:e}),E.emit(_.EVENTS.SUBSCRIBE,e)})["catch"](function(t){E.emit(_.EVENTS.ERROR,t)})}function c(t){var e=u(t),r={getState:w.getState,toggle:function(){var t=w.getState(),n=t.isSubscribed;return n?o(e).then(function(){return r}):a(e).then(function(){return r})},subscribe:function(){return a(e).then(function(){return r})},unsubscribe:function(){return o(e).then(function(){return r})}};return r}function u(t){return p.notifyServer({application:t.application,url:t.serverUrl})}function l(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=f({},_.APP_DEFAULTS,t),r=u(e),i=""+d.getLocation().origin+e.workerScope;w.dispatch({type:_.EVENTS.CHANGE,state:{settings:e}});var o=new Promise(function(t){n(e).then(s).then(function(){return g.uninstallAllInScope(i)}).then(function(){return g.installWorker(e)}).then(function(){return g.ready().then(g.getSubscription).then(function(t){return r(0,t).then(function(){w.dispatch({type:_.EVENTS.READY,state:{isSubscribed:!0,subscription:p.getPayload(t.toJSON())}})})["catch"](function(t){E.emit(_.EVENTS.ERROR,t)})})["catch"](function(){w.dispatch({type:_.EVENTS.READY,state:{isSubscribed:!1}})})})["catch"](function(t){E.emit(_.EVENTS.ERROR,t)}).then(function(){return t(c(e))})}),a={on:function(t,e){return E.on(t,e),a},ready:function(){return o}};return a}Object.defineProperty(e,"__esModule",{value:!0});var f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.init=l;var h=r(2),m=r(3),p=r(4),d=r(7),g=r(11),_=r(5),y=r(12),v=window,b=v.Notification,E=new y,w=m.createStore(function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];switch(e.type){case _.EVENTS.CHANGE:return f({},t,e.state);case _.EVENTS.SUBSCRIBE:return f({},t,{isSubscribed:!0,subscription:e.subscription});case _.EVENTS.UNSUBSCRIBE:return t=f({},t,{isSubscribed:!1}),delete t.subscription,t;case _.EVENTS.READY:var r=f({isReady:!0},t,e.state);return E.emit(_.EVENTS.READY,c(r.settings),r),r;default:return t}},{settings:{},isSubscribed:void 0});w.subscribe(function(t){E.emit(_.EVENTS.CHANGE,t)})},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});e.PushNotificationsError=function(t){function e(t){var s=t.message,i=t.code;r(this,e);var o=n(this,Object.getPrototypeOf(e).call(this,s));return o.name=o.constructor.name,o.code=i,Error.captureStackTrace?Error.captureStackTrace(o,o.constructor.name):o.stack=(new Error).stack,o}return s(e,t),e}(Error)},function(t,e){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=n({},e),s=[],i=function(){return n({},r)},o=function(e){return r=t(i(),e),s.slice(0).forEach(function(t){return t(r,e)}),e},a=function(t){s=s.concat(t);var e=!0;return function(){if(e){e=!1;var r=listeners.indexOf(t),n=listeners.slice(0,r),s=listeners.slice(r+1);listeners=n.concat(s)}return!e}};return o({}),{getState:i,dispatch:o,subscribe:a}}Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.createStore=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){var e=l["default"](c.getBrowser().name);return e.getPayload(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.notifyServer=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};e.getPayload=s;var o=r(5),a=r(2),c=r(7),u=r(8),l=n(u);e.notifyServer=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return function(e,r){var n=s(r.toJSON()),c=i({},o.SERVER_PAYLOAD,{application:t.application,status:e,token:n.token});return fetch(t.url,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(t){if(200!==t.status)throw new a.PushNotificationsError(o.ERRORS.SERVER_SYNC);return t.json()})["catch"](function(){throw new a.PushNotificationsError(o.ERRORS.SERVER_SYNC)})}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SERVER_PAYLOAD=e.WORKER_PAYLOAD=e.APP_DEFAULTS=e.ERRORS=e.EVENTS=void 0;var n=r(6),s=r(7),i="2.1.0",o=n.getTimeZoneMark(),a=s.getPlatform({chrome:"android"}),c="m";e.EVENTS={READY:"ready",CHANGE:"change",ERROR:"error",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe"},e.ERRORS={SUBSCRIBE:{code:"subscribe",message:"Ошибка при попытке подписаться на пуш-уведомления"},UNSUBSCRIBE:{code:"unsubscribe",message:"Ошибка при попытке отписаться от пуш-уведомлений"},GET_SUBSCRIPTION:{code:"get_subscription",message:"Ошибка при попытке получения объекта пуш-уведомлений"},PERMISSION_DENIED:{code:"permission_denied",message:"Пользователь запретил доставку уведомлений"},UNSUPPORTED:{code:"unsupported",message:"Не поддерживается браузером"},TIME_MARK:{code:"time_mark",message:"Установлена временная отметка"},SERVER_SYNC:{code:"server_sync",message:"Ошибка синхронизации с сервером"},UNKNOWN_PLATFORM:{code:"unknown_platform",message:"Неизвестный браузер или платформа"}},e.APP_DEFAULTS={allowedPlatforms:["Chrome","Firefox"],application:"mailrupush",version:"2.1.0",platform:a.BROWSER,workerPath:"/push-worker.js",workerScope:"/",serverUrl:"/push-api/subscription/"},e.WORKER_PAYLOAD={location:s.getLocation().pathname,platform:a,timezone:o},e.SERVER_PAYLOAD={application:null,platform:a.BROWSER.NAME,status:null,token:null,settings:{capabilities:{geo_id:[0],push_delivery_time_range:"00:00-23:59"},client:{os_version:a.BROWSER.VERSION,version:a.BROWSER.IS_MOBILE?c+"-"+i:i},client_time_zone:o}}},function(t,e){"use strict";function r(){var t=(new Date).getTimezoneOffset(),e=Math.abs(t),r="GMT"+(0>t?"+":"-");return r+("00"+Math.floor(e/60)).slice(-2)+("00"+e%60).slice(-2)}Object.defineProperty(e,"__esModule",{value:!0}),e.getTimeZoneMark=r},function(t,e){"use strict";function r(){return!!(window.fetch&&window.navigator.serviceWorker&&window.Notification&&window.PushManager&&window.ServiceWorkerRegistration)}function n(){var t=navigator.userAgent.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],e=t[1]?t[1]:"",r=t[2]?t[2]:"";return{name:e,version:r}}function s(){var t=navigator.userAgent.match(/(android|blackBerry|iphone|ipad|ipod|opera|iemobile|mobile)/i)||[];return t.length>0}function i(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=n(),r=e.name.toLowerCase();return{BROWSER:{NAME:t[r]?t[r]:r,PLATFORM:e.name,VERSION:e.version,IS_MOBILE:s()}}}function o(){return window.location}Object.defineProperty(e,"__esModule",{value:!0}),e.isSupported=r,e.getBrowser=n,e.isMobile=s,e.getPlatform=i,e.getLocation=o},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function s(t){switch(t.toLowerCase()){case"chrome":return c["default"];case"firefox":return l["default"];default:throw new o.PushNotificationsError(i.ERRORS.UNKNOWN_PLATFORM)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=s;var i=r(5),o=r(2),a=r(9),c=n(a),u=r(10),l=n(u);t.exports=e["default"]},function(t,e){"use strict";function r(t){var e=t.endpoint.split("/");return{endpoint:t.endpoint,token:e.slice(-1)[0]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getPayload=r,e["default"]={getPayload:r}},function(t,e){"use strict";function r(t){return{endpoint:t.endpoint,token:t.endpoint}}Object.defineProperty(e,"__esModule",{value:!0}),e.getPayload=r,e["default"]={getPayload:r}},function(t,e,r){"use strict";function n(t){var e=t.workerPath,r=t.workerScope;return g.serviceWorker.register(e,{scope:r})}function s(){var t=arguments.length<=0||void 0===arguments[0]?function(){return!0}:arguments[0];return g.serviceWorker.getRegistrations().then(function(e){return e.filter(t)})}function i(){return s().then(function(t){return Promise.all(t.map(function(t){return t.unregister()}))})}function o(t){return s(function(e){return e.scope!==t}).then(function(t){return Promise.all(t.map(function(t){return t.unregister()}))})}function a(){return g.serviceWorker.ready}function c(t){return new Promise(function(e,r){t.pushManager.getSubscription().then(function(t){t?e(t):r(new p.PushNotificationsError(m.ERRORS.GET_SUBSCRIPTION))})})}function u(t){return c(t).then(function(t){return t.unsubscribe().then(function(e){return e?Promise.resolve(t):Promise.reject(new p.PushNotificationsError(m.ERRORS.UNSUBSCRIBE))})})}function l(t){return new Promise(function(e,r){t.pushManager.subscribe({userVisibleOnly:!0}).then(function(t){t?e(t):r(new p.PushNotificationsError(m.ERRORS.SUBSCRIBE))})})}function f(t){return c(t)["catch"](function(){return l(t)})}function h(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return uninstallWorker().then(function(){return n.apply(void 0,e)})["catch"](function(){return n.apply(void 0,e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.installWorker=n,e.getWorkerList=s,e.uninstallAll=i,e.uninstallAllInScope=o,e.ready=a,e.getSubscription=c,e.removeSubscription=u,e.createSubscription=l,e.getOrCreateSubscription=f,e.updateWorker=h;var m=r(5),p=r(2),d=(r(7),window),g=d.navigator},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function s(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!s(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,s,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(i(r))for(a=Array.prototype.slice.call(arguments,1),u=r.slice(),s=u.length,c=0;s>c;c++)u[c].apply(this,a);return!0},r.prototype.addListener=function(t,e){var s;if(!n(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(s=o(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),s||(s=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var s=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,s,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,s=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(a=o;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){s=a;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}}])})},function(t,e,r){"use strict";function n(){return c.LS_TIME_KEY+":4.0.2"}function s(){var t=n(),e=Object.keys(u).filter(function(e){return 0===e.indexOf(c.LS_TIME_KEY)&&e!==t}).reduce(function(t,e){return t[e]=u.getItem(e),u.removeItem(e),t},{});return Promise.resolve(e)}function i(){var t=n(),e=u.getItem(t);return u.removeItem(t),Promise.resolve(e)}function o(t){var e=new Date,r=n();return s().then(function(){var n=u.getItem(r),s=e.getTime(),i=s+t;return new Promise(function(t,e){"undefined"==typeof n||null===n?t(i):s>parseInt(n,10)?t(i):e(c.ERRORS.TIMEMARK_HAS_BEEN_SET)})})}function a(t){if("undefined"==typeof t||null===t)return Promise.reject(new Error(c.ERRORS.TIMEMARK_DELTA_INVALID.message));var e=n();return i().then(function(){return o(t)}).then(function(t){return u.setItem(e,t),t})}Object.defineProperty(e,"__esModule",{value:!0}),e.clearTimemark=i,e.checkTimeMark=o,e.updateTimeMark=a;var c=(r(2),r(4)),u=window.localStorage},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.MODEL_NAME="PushNotificationsModel",n=e.VIEW_NAME="PushNotificationsView";e.LS_TIME_KEY=r+":nextTime",e.MODEL_DEFAULTS_OPTS={isEnabled:!0,timeMarkDelta:864e5,pushOptions:{application:"application",allowedPlatforms:["Chrome"],workerPath:"/push-worker.js",workerScope:"/",serverUrl:"/"}},e.VIEW_DEFAUL_OPTS={template:null,cssSels:{button:".js-push-notifications__button",statusLabel:".js-push-notifications__status",Main:{statusTooltip:".js-push-notifications__switch-tooltip"}},cssClss:{tooltipShown:"tooltip_shown"},allowedActions:["subscribe","unsubscribe","defer","toggle"],statusTooltipTimeout:5e3,getStatusText:function(t,e,r){var n=e.attr(r.attrs.textPushOn)||"",s=e.attr(r.attrs.textPushOff)||"";return t.isSubscribed?n:s},styles:{tooltip:function(t){return{position:"fixed",zIndex:9999,top:-10,left:75}}},attrs:{index:"data-action",textPushOn:"data-push-on",textPushOff:"data-push-off"}},e.ERRORS={TIMEMARK_HAS_BEEN_SET:{message:"Временная отметка",code:"time_mark"},TIMEMARK_DELTA_INVALID:{message:"Некорректное значение метки"},CPF_NOT_FOUND:{message:"CPF is not found"},INVALID_TEMPLATE:{message:n+": invalid template"},INVALID_ACTION:{message:n+": invalid action"}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=r(4);e["default"]=function(t,e,r,i){if("undefined"==typeof r||null===r)throw new Error(s.ERRORS.CPF_NOT_FOUND.message);var o=r.Basic.Constructors.getView,a=r.Basic.moduleOpts.setParams,c=(r.Tools.initModule,r.Tools.FuncTools.multi),u=null,l=function(e){var r=this._opts.template,n=this._opts.styles.tooltip,s=r(e),i=t(s);return"function"==typeof n&&i.css(n.call(this,e)),i},f=c(function(t){var e=this._opts.allowedActions;if(-1===e.indexOf(t))throw new Error(s.ERRORS.INVALID_ACTION.message+" ("+t+")");return this.hideDialog(),t}).method("defer",function(){return this._model.defer()}).method("subscribe",function(){return this._model.subscribe()}).method("unsubscribe",function(){return this._model.unsubscribe()}).method("toggle",function(){var t=this;return this._model.ready().then(function(e){m.call(t,!1);var r=e.getState();r.isSubscribed?t._model.unsubscribe():t.showDialog()})}),h=function(e){var r=this,s=this._opts.getStatusText,i=this._opts.cssSels.statusLabel,o=this._elems.parent.find(i).toArray();o.forEach(function(i){var o=t(i),a=s(e,o,n({},r._opts));o.html(a)})},m=function(t){var e=this._elems.statusTooltip,r=this._opts.cssClss.tooltipShown;u&&(clearTimeout(u),u=null),e&&e.toggleClass(r,!!t)},p=function(e){e.preventDefault();var r=f.bind(this),n=t(e.currentTarget),s=n.attr(this._opts.attrs.index);r(s)},d=function(t){t.isSubscribed||this.showDialog()},g=function(t){},_=function(t){h.call(this,t)},y=function(){m.call(this,!1)},v=function(){var t=m.bind(this),e=this._opts.statusTooltipTimeout;t(!0),e&&(u=setTimeout(function(){t(!1)},e))};return a(s.VIEW_NAME,{acceptTypes:[s.MODEL_NAME]}),o({_Handlers:{dom:{"click:button":p},model:{change:_,subscribe:y,unsubscribe:v,ready:d,error:g}},_Init:function(){if(i&&console.log(s.VIEW_NAME+":init"),!this._opts.template)throw new TypeError(s.ERRORS.INVALID_TEMPLATE.message)},showDialog:function(){return this._elems.dialog||(this._elems.dialog=l.call(this)),this._elems.parent.append(this._elems.dialog),this},hideDialog:function(){return this._elems.dialog&&this._elems.dialog.remove(),this},toggleDialog:function(){return this._elems.dialog?this.hideDialog():this.showDialog(),this}},s.VIEW_DEFAUL_OPTS,null,s.VIEW_NAME)}(window.jQuery||window.$,window,window.ru.mail.cpf,window.DEBUG),t.exports=e["default"]}]),function(t){t.fest||(t.fest={}),t.fest["ct-push-notifications.xml"]=t.fest["bem/lady/web/web.bundles/ct-push-notifications"]=function(t){"use strict";function e(t){f(t+'\nin block "'+b+'" at line: '+v+"\nfile: "+y)}function r(t,e,r){if(r)for(var n in e)"function"==typeof e[n]&&e[n].param&&(e[n]=e[n]());return t.call(h,e)}var n,s,i,o,a,c,u,l,f,h=this,m="",p=[],d=[],g="",_={},y="",v="",b="",E=[],w={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,wbr:!0},S=/[&<>"]/g,x=/[&<>"]/,P={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"},R=function(t){return"string"==typeof t&&x.test(t)?t.replace(S,O):null==t?"":t},O=function(t){return P[t]},N=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},T=function(t){return t.param=!0,t};h&&"function"==typeof h.i18n?h.i18n:function(t){return t};f="undefined"==typeof __fest_error?"undefined"!=typeof console&&console.error?function(){return Function.prototype.apply.call(console.error,console,arguments)}:function(){}:__fest_error;if(function(t){_.ajax=function(t){var r="";try{i=t.html}catch(n){i=!1,e(n.message)}if(i)try{r+=t.html}catch(n){e(n.message+"5")}return r}}(t),function(t){_["m-push-notifications__buttons"]=function(t){var n="";try{var i=t.items||[],o=t.itemCallback||function(t){return t}}catch(a){e(a.message)}s="element",u={};try{N(u,t)}catch(a){e(a.message)}try{N(u,{baseClass:"m-push-notifications__buttons"})}catch(a){e(a.message)}return u.html=T(function(){var t,n,s,a,c,u,l,f="";try{l=i||[],u=l.length}catch(h){l=[],u=0,e(h.message)}for(a=0;u>a;a++){c=l[a],t="element",s={};try{N(s,{baseClass:"m-push-notifications__button"})}catch(h){e(h.message)}s.html=T(function(){var t,n,s,i,u="";try{n="link"===c.type}catch(l){n=!1,e(l.message)}if(n){t="link",i={};try{N(i,c)}catch(l){e(l.message)}try{N(i,fest._helpers.mergeTopParams({mix:["js-push-notifications__button"]},c,o(c,a)))}catch(l){e(l.message)}s=_[t],s&&(u+=r(s,i,!1))}else{t="button",i={};try{N(i,c)}catch(l){e(l.message)}try{N(i,fest._helpers.mergeTopParams({mix:["js-push-notifications__button"]},c,o(c,a)))}catch(l){e(l.message)}s=_[t],s&&(u+=r(s,i,!1))}return u}),n=_[t],n&&(f+=r(n,s,!0))}return f}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_["m-push-notifications__body"]=function(t){var n="";try{var o=t.items||[]}catch(a){e(a.message)}try{i=t.text}catch(a){i=!1,e(a.message)}if(i){s="element",u={};try{N(u,{baseClass:"m-push-notifications__text"})}catch(a){e(a.message)}u.html=T(function(){var n,s,i,o="";n="text",i={};try{N(i,t.textParams)}catch(a){e(a.message)}try{N(i,{text:t.text})}catch(a){e(a.message)}return s=_[n],s&&(o+=r(s,i,!1)),o}),c=_[s],c&&(n+=r(c,u,!0)),s="line",u={};try{N(u,{mods:["separator"]})}catch(a){e(a.message)}try{N(u,t.lineParams)}catch(a){e(a.message)}c=_[s],c&&(n+=r(c,u,!1))}try{i=o.length}catch(a){i=!1,e(a.message)}if(i){s="m-push-notifications__buttons",u={};try{N(u,t.buttonsParams)}catch(a){e(a.message)}try{N(u,{items:o,itemCallback:t.itemCallback})}catch(a){e(a.message)}c=_[s],c&&(n+=r(c,u,!1))}return n}}(t),function(t){_.block=function(t){var n="";s="element",u={};try{N(u,t)}catch(i){e(i.message)}try{N(u,{baseClass:"block"})}catch(i){e(i.message)}return u.html=T(function(){var n,s,i,o,a="";try{s=t.wrapper}catch(c){s=!1,e(c.message)}if(s){n="wrapper",o={};try{N(o,t.wrapper)}catch(c){e(c.message)}try{N(o,{html:t.html})}catch(c){e(c.message)}i=_[n],i&&(a+=r(i,o,!1))}else{try{s=t.html}catch(c){s=!1,e(c.message)}if(s)try{a+=t.html}catch(c){e(c.message+"25")}}return a}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_.wrapper=function(t){var n="";s="element",u={};try{N(u,t)}catch(i){e(i.message)}try{N(u,{baseClass:"wrapper"})}catch(i){e(i.message)}return c=_[s],c&&(n+=r(c,u,!1)),n}}(t),function(t){_.element=function(t){var n="";try{var a=t.baseParams||t.forParams||t,f=a.attrs||{},h=t.baseClass||t.forClass||"",m=t.elem,p=t.htmlDeep;m&&p&&!m.htmlDeep?m.htmlDeep=p:!m&&p&&(t.html=p),t.href&&(f.href=t.href)}catch(d){e(d.message)}try{l=f.href&&"a"||t.tagName||"div","string"!=typeof l&&(e("Element name must be a string"),l="div")}catch(d){l="div",e(d.message)}E.push(l),n+="<"+l,n+=' class="';try{s=fest._helpers.classNamesFor(h,a)}catch(d){s="",e(d.message)}n+=s,n+='"';var g,y,v;try{v=f||{}}catch(d){o={},e(d.message)}for(g in v){y=v[g];try{s=g}catch(d){s="",e(d.message)}if(""!==s){n+=" "+s+'="';try{n+=R(y)}catch(d){e(d.message+"25")}n+='"'}}l=E[E.length-1],n+=l in w?"/>":">";try{i=t.htmlPrepend}catch(d){i=!1,e(d.message)}if(i)try{n+=t.htmlPrepend}catch(d){e(d.message+"31")}try{i=t.html}catch(d){i=!1,e(d.message)}if(i)try{n+=t.html}catch(d){e(d.message+"34")}try{i=t.elem}catch(d){i=!1,e(d.message)}if(i){s="element",u={};try{u=t.elem}catch(d){e(d.message)}c=_[s],c&&(n+=r(c,u,!1))}try{i=t.elems}catch(d){i=!1,e(d.message)}if(i){var b,m,S,x;try{x=t.elems||[],S=x.length}catch(d){x=[],S=0,e(d.message)}for(b=0;S>b;b++){m=x[b];try{i=m}catch(d){i=!1,e(d.message)}if(i){s="element",u={};try{u=m}catch(d){e(d.message)}c=_[s],c&&(n+=r(c,u,!1))}}}try{i=t.htmlAppend}catch(d){i=!1,e(d.message)}if(i)try{n+=t.htmlAppend}catch(d){e(d.message+"47")}return l=E[E.length-1],l in w||(n+="</"+l+">"),E.pop(),n}}(t),function(t){_.icon=function(t){var n="";try{t.tag=t.tag||(t.href?"a":"i");var a=t.attrs=t.attrs||{};"title"in t&&!("title"in a)&&(a.title=t.title),"href"in t&&!("href"in a)&&(a.href=t.href)}catch(f){e(f.message)}try{l=t.tag,"string"!=typeof l&&(e("Element name must be a string"),l="div")}catch(f){l="div",e(f.message)}E.push(l),n+="<"+l,n+=' class="';try{n+=R(fest._helpers.classNamesFor("icon",t))}catch(f){e(f.message+"15")}n+='"';var h,m,p;try{p=a||{}}catch(f){o={},e(f.message)}for(h in p){m=p[h];try{s=h}catch(f){s="",e(f.message)}if(""!==s){n+=" "+s+'="';try{n+=R(m)}catch(f){e(f.message+"22")}n+='"'}}l=E[E.length-1],n+=l in w?"/>":">";try{i=t.icon}catch(f){i=!1,e(f.message)}if(i){s="icon",u={};try{u=t.icon}catch(f){e(f.message)}c=_[s],c&&(n+=r(c,u,!1))}try{i=t.html}catch(f){i=!1,e(f.message)}if(i)try{n+=t.html}catch(f){e(f.message+"32")}return l=E[E.length-1],l in w||(n+="</"+l+">"),E.pop(),n}}(t),function(t){_.loader=function(t){var r="";try{d[0]=R(fest._helpers.classNamesFor("loader",t))}catch(n){d[0]="",e(n.message)}return r+='<svg class="'+d[0]+'" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10 -10 220 220"><defs><linearGradient id="transparent" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="rgba(119, 119, 119, 0)" stop-opacity="0"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, 0)" stop-opacity="0"></stop></linearGradient><linearGradient id="one" gradientUnits="objectBoundingBox" x1="1" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="rgba(119, 119, 119, 0)" stop-opacity="0"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, .33)"></stop></linearGradient><linearGradient id="two" gradientUnits="objectBoundingBox" x1="1" y1="1" x2="0" y2="0"><stop offset="0%" stop-color="rgba(119, 119, 119, .33)"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, .66)"></stop></linearGradient><linearGradient id="three" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="0" y2="0"><stop offset="0%" stop-color="rgba(119, 119, 119, .66)"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, 1)"></stop></linearGradient><linearGradient id="four" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="1" y2="0"><stop offset="0%" stop-color="rgba(119, 119, 119, 1)"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, 1)"></stop></linearGradient><linearGradient id="five" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="rgba(119, 119, 119, 1)"></stop><stop offset="100%" stop-color="rgba(119, 119, 119, 1)"></stop></linearGradient></defs><g fill="none" stroke-width="40" transform="translate(100,100)"><path d="M 81.6,-40 A 90,90 0 0,1 81.6,40" stroke="url(#transparent)"></path><path d="M 81.6,40 A 90,90 0 0,1 0,90" stroke="url(#one)"></path><path d="M 0,90 A 90,90 0 0,1 -81.6,40" stroke="url(#two)"></path><path d="M -81.6,40 A 90,90 0 0,1 -81.6,-40" stroke="url(#three)"></path><path d="M -81.6,-40 A 90,90 0 0,1 0,-90" stroke="url(#four)"></path><path d="M 0,-90 A 90,90 0 0,1 81.6,-40" stroke="url(#five)" stroke-linecap="round"></path></g></svg>'}}(t),function(t){_.loader=function(t){var r="";try{d[0]=R(fest._helpers.classNamesFor("loader",t))}catch(n){d[0]="",e(n.message)}return r+='<svg class="'+d[0]+'" xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="-10 -10 220 220"><defs><linearGradient id="transparent" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="rgba(255, 45, 84, 0)" stop-opacity="0"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, 0)" stop-opacity="0"></stop></linearGradient><linearGradient id="one" gradientUnits="objectBoundingBox" x1="1" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="rgba(255, 45, 84, 0)" stop-opacity="0"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, .33)"></stop></linearGradient><linearGradient id="two" gradientUnits="objectBoundingBox" x1="1" y1="1" x2="0" y2="0"><stop offset="0%" stop-color="rgba(255, 45, 84, .33)"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, .66)"></stop></linearGradient><linearGradient id="three" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="0" y2="0"><stop offset="0%" stop-color="rgba(255, 45, 84, .66)"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, 1)"></stop></linearGradient><linearGradient id="four" gradientUnits="objectBoundingBox" x1="0" y1="1" x2="1" y2="0"><stop offset="0%" stop-color="rgba(255, 45, 84, 1)"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, 1)"></stop></linearGradient><linearGradient id="five" gradientUnits="objectBoundingBox" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="rgba(255, 45, 84, 1)"></stop><stop offset="100%" stop-color="rgba(255, 45, 84, 1)"></stop></linearGradient></defs><g fill="none" stroke-width="40" transform="translate(100,100)"><path d="M 81.6,-40 A 90,90 0 0,1 81.6,40" stroke="url(#transparent)"></path><path d="M 81.6,40 A 90,90 0 0,1 0,90" stroke="url(#one)"></path><path d="M 0,90 A 90,90 0 0,1 -81.6,40" stroke="url(#two)"></path><path d="M -81.6,40 A 90,90 0 0,1 -81.6,-40" stroke="url(#three)"></path><path d="M -81.6,-40 A 90,90 0 0,1 0,-90" stroke="url(#four)"></path><path d="M 0,-90 A 90,90 0 0,1 81.6,-40" stroke="url(#five)" stroke-linecap="round"></path></g></svg>';
}}(t),function(t){_.button=function(t){var n="";try{var i,o=t.icon;o&&(i=o.position||"left",o=fest._helpers.mergeParams(o,{mix:["button__icon"].concat(t.text||t.ending?["button__icon_"+i]:[])}))}catch(a){e(a.message)}s="element",u={};try{N(u,t)}catch(a){e(a.message)}try{N(u,{baseClass:"button",tagName:t.tagName||"button"})}catch(a){e(a.message)}return u.html=T(function(){var n,s,a,c,u="";try{s=t.loader}catch(l){s=!1,e(l.message)}if(s){n="loader",c={};try{c={mods:["button"],mix:["button__loader"]}}catch(l){e(l.message)}a=_[n],a&&(u+=r(a,c,!1))}u+='<span class="button__inner">';try{s="left"===i}catch(l){s=!1,e(l.message)}if(s){n="icon",c={};try{c=o}catch(l){e(l.message)}a=_[n],a&&(u+=r(a,c,!1))}try{s=t.text}catch(l){s=!1,e(l.message)}if(s){n="element",c={};try{N(c,t.textParams)}catch(l){e(l.message)}try{N(c,{baseClass:"button__text",html:t.text})}catch(l){e(l.message)}a=_[n],a&&(u+=r(a,c,!1))}try{s=t.hiddenText}catch(l){s=!1,e(l.message)}if(s){u+='<span class="button__text button__text_hidden">';try{u+=t.hiddenText}catch(l){e(l.message+"56")}u+="</span>"}try{s=t.ending}catch(l){s=!1,e(l.message)}if(s){n="element",c={};try{N(c,t.endingParams)}catch(l){e(l.message)}try{N(c,{baseClass:"button__ending",html:t.ending})}catch(l){e(l.message)}a=_[n],a&&(u+=r(a,c,!1))}try{s="right"==i}catch(l){s=!1,e(l.message)}if(s){n="icon",c={};try{c=o}catch(l){e(l.message)}a=_[n],a&&(u+=r(a,c,!1))}try{s=t.html}catch(l){s=!1,e(l.message)}if(s)try{u+=t.html}catch(l){e(l.message+"79")}return u+="</span>"}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_.line=function(t){var r="";try{d[0]=R(fest._helpers.classNamesFor("line",t))}catch(n){d[0]="",e(n.message)}return r+='<div class="'+d[0]+'"></div>'}}(t),function(t){_.link=function(t){var n="";try{var i,o=t.textParams||{mods:t.textMods||[],mix:t.textMix||[]},a=t.endingParams||{mods:t.endingMods||[],mix:t.endingMix||[]},l=t.icon;l&&(i=l.position||"left",l.mix=l.mix||[],l.mix.push("link__icon"),l.mix.push("margin_"+("left"==i?"right":"left")+"_"+(l.marginSize||5)),t.mods=t.mods||[],t.mods.push("icon")),t.ending&&(o.mix=["margin_right_5"].concat(o.mix||[]))}catch(f){e(f.message)}s="element",u={};try{N(u,t)}catch(f){e(f.message)}try{N(u,{baseClass:"link",tagName:"span"})}catch(f){e(f.message)}return u.html=T(function(){var n,s,c,u,f="";try{s="left"==i}catch(h){s=!1,e(h.message)}if(s){n="icon",u={};try{u=l}catch(h){e(h.message)}c=_[n],c&&(f+=r(c,u,!1))}try{s=t.beginning}catch(h){s=!1,e(h.message)}if(s){f+='<span class="link__beginning">';try{f+=t.beginning}catch(h){e(h.message+"46")}f+="</span>"}try{s="text"in t}catch(h){s=!1,e(h.message)}if(s){n="element",u={};try{N(u,o)}catch(h){e(h.message)}try{N(u,{baseClass:"link__text",tagName:"span",html:t.text})}catch(h){e(h.message)}c=_[n],c&&(f+=r(c,u,!1))}try{s=t.ending}catch(h){s=!1,e(h.message)}if(s){n="element",u={};try{N(u,a)}catch(h){e(h.message)}try{N(u,{baseClass:"link__ending",tagName:"span",html:t.ending})}catch(h){e(h.message)}c=_[n],c&&(f+=r(c,u,!1))}try{s="right"==i}catch(h){s=!1,e(h.message)}if(s){n="icon",u={};try{u=l}catch(h){e(h.message)}c=_[n],c&&(f+=r(c,u,!1))}return f}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_.text=function(t){var n="";s="element",u={};try{N(u,t)}catch(i){e(i.message)}try{N(u,{baseClass:"text",tagName:t.tag||"span",html:t.text||t.html})}catch(i){e(i.message)}return c=_[s],c&&(n+=r(c,u,!1)),n}}(t),function(t){_.scroll=function(t){var r="";try{t.type=t.type||"vertical";var n=t.trackParams||{},s=t.trackBoxParams||{},i=t.dragParams||{},o=t.dragWrapParams||{};t.mix=t.mix||["js-scrollbar"],s.mix=s.mix||["js-scrollbar__track"],o.mix=o.mix||["js-scrollbar__track__drag__point"],i.mix=i.mix||["js-scrollbar__track__drag"]}catch(a){e(a.message)}try{d[0]=R(fest._helpers.classNamesFor("scroll",t))}catch(a){d[0]="",e(a.message)}try{d[1]=R(t.type)}catch(a){d[1]="",e(a.message)}r+='<div class="'+d[0]+'" data-type="'+d[1]+'">';try{d[0]=R(fest._helpers.classNamesFor("scroll__track",n))}catch(a){d[0]="",e(a.message)}r+='<div class="'+d[0]+'">';try{d[0]=R(fest._helpers.classNamesFor("scroll__track__box",s))}catch(a){d[0]="",e(a.message)}r+='<div class="'+d[0]+'">';try{d[0]=R(fest._helpers.classNamesFor("scroll__track__drag-wrap",o))}catch(a){d[0]="",e(a.message)}r+='<div class="'+d[0]+'">';try{d[0]=R(fest._helpers.classNamesFor("scroll__track__drag",i))}catch(a){d[0]="",e(a.message)}return r+='<div class="'+d[0]+'"></div></div></div></div></div>'}}(t),function(t){_.tooltip__box=function(t){var n="";s="element",u={};try{N(u,t)}catch(i){e(i.message)}try{N(u,{baseClass:"tooltip__box"})}catch(i){e(i.message)}return u.html=T(function(){var n,s,i,o="";n="element",i={};try{N(i,t.innerParams)}catch(a){e(a.message)}try{N(i,{baseClass:"tooltip__inner"})}catch(a){e(a.message)}return i.html=T(function(){var n,s,i,o,a="";try{s=t.close}catch(c){s=!1,e(c.message)}if(s){n="icon",o={};try{N(o,t.close)}catch(c){e(c.message)}try{N(o,fest._helpers.mergeTopParams(t.close,{mix:["tooltip__close"]}))}catch(c){e(c.message)}i=_[n],i&&(a+=r(i,o,!1))}try{s=t.scrollParams}catch(c){s=!1,e(c.message)}if(s){n="scroll",o={};try{o=fest._helpers.mergeParams(t.scrollParams,{mix:["tooltip__scroll"]})}catch(c){e(c.message)}i=_[n],i&&(a+=r(i,o,!1))}n="element",o={};try{N(o,t.contentParams)}catch(c){e(c.message)}try{N(o,{baseClass:"tooltip__content"})}catch(c){e(c.message)}return o.html=T(function(){var r,n="";try{r=t.html}catch(s){r=!1,e(s.message)}if(r)try{n+=t.html}catch(s){e(s.message+"50")}return n}),i=_[n],i&&(a+=r(i,o,!0)),a}),s=_[n],s&&(o+=r(s,i,!0)),o}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_.tooltip=function(t){var n="";try{var i=t.scrollParams;i&&(t.mods=["scroll"].concat(t.mods||[]))}catch(o){e(o.message)}s="element",u={};try{N(u,t)}catch(o){e(o.message)}try{N(u,{baseClass:"tooltip"})}catch(o){e(o.message)}return u.html=T(function(){var n,s,o,a,c="";try{s=t.html}catch(u){s=!1,e(u.message)}if(s){n="element",a={};try{N(a,{baseClass:"tooltip__wrapper"})}catch(u){e(u.message)}a.html=T(function(){var r="";try{r+=t.html}catch(n){e(n.message+"28")}return r}),o=_[n],o&&(c+=r(o,a,!0))}try{s=t.boxHtml||t.boxParams||t.innerParams}catch(u){s=!1,e(u.message)}if(s){n="tooltip__box",a={};try{N(a,t.boxParams)}catch(u){e(u.message)}try{N(a,{scrollParams:i,innerParams:t.innerParams,contentParams:t.contentParams,html:t.boxHtml,close:t.close})}catch(u){e(u.message)}o=_[n],o&&(c+=r(o,a,!1))}return c}),c=_[s],c&&(n+=r(c,u,!0)),n}}(t),function(t){_["m-push-notifications"]=function(t){var n="";try{i="block"===t.type}catch(o){i=!1,e(o.message)}if(i){s="block",u={};try{N(u,fest._helpers.mergeTopParams({},t))}catch(o){e(o.message)}u.html=T(function(){var n,s,i,o="";n="m-push-notifications__body",i={};try{i=t}catch(a){e(a.message)}return s=_[n],s&&(o+=r(s,i,!1)),o}),c=_[s],c&&(n+=r(c,u,!0))}else{s="tooltip",u={};try{N(u,fest._helpers.mergeTopParams({mods:["arrow_top-left","positioned","shown","collapse"]},t))}catch(o){e(o.message)}u.boxHtml=T(function(){var n,s,i,o="";n="m-push-notifications__body",i={};try{N(i,t)}catch(a){e(a.message)}return s=_[n],s&&(o+=r(s,i,!1)),o}),c=_[s],c&&(n+=r(c,u,!0))}return n}}(t),function(t){s="ajax",u={},u.html=T(function(){var t,n,s,i="";t="m-push-notifications",s={};try{N(s,{mods:["width_huge"],text:"Хотите получать первыми самые важные новости? Подпишитесь на уведомления!",items:[{mods:["color_project"],text:"Подписаться",attrs:{"data-action":"subscribe"}},{text:"Не сейчас",attrs:{"data-action":"defer"}}]})}catch(o){e(o.message)}return n=_[t],n&&(i+=r(n,s,!1)),i}),p.push(m,{name:s,params:u,cp:!0}),m=""}(t),a=p.length){for(o=0;a>o;o++)n=p[o],"string"==typeof n?g+=n:(c=_[n.name],c&&(g+=r(c,n.params,n.cp)));return g+m}return m}}(Function("return this")()),function(t,e){"use strict";var r=t.Basic.moduleOpts.setParams,n=t.Tools.getTemplate,s=e.utils.RadarReport.createReporter,i=s({projectName:"lady",transportType:"img"});r("PushNotificationsModel",{options:{_Handlers:{ready:function(t){i.send("push_client_ready_subscribed",t.isSubscribed?1:0)},subscribe:function(){i.send("push_client_subscribe",1)},unsubscribe:function(){i.send("push_client_subscribe",0)},error:function(t){var e="push_client_error"+(t.code?"_"+t.code:"");i.send(e,1)}},timeMarkDelta:6048e5,pushOptions:{application:"lady",allowedPlatforms:["Chrome","Firefox"],workerPath:"/push-worker.js",workerScope:"/",serverUrl:"/api/browserpush/settings/"}}}),r("PushNotificationsView",{options:{template:n("ct-push-notifications.xml")}})}(this.ru.mail.cpf,this.ru.mail.mpf);
